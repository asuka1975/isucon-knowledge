# やっておきたかったリスト

- ラスト30分にやることリスト
  - systemctlの永続化

- メモリキャッシュ
  - 各テーブルがどれくらい変更されるかのモニタリング
    - 全く変化しない　→　最初にメモリに全部上げる
    - 少し変化する　　→　寿命を設けてメモリに上げる
    - めっちゃ変化する→　メモリキャッシュしない
  - 一応キャッシュ機構作ってみたもののmutableなオブジェクトを渡したときの動作が保証されてなさそう

- ブランチどう管理するか問題
  - ベンチ中にブランチ切り替えたりサービス再起動したりと色々問題があった
  - ベンチ中は操作不可能なdeployスクリプトを作る
  　`$ deploy branch_name`的な
  - 各々が`$ deploy asuka-implement-hoge`やったあとに、MR作成してmainにマージ、マージコミットのメッセージにスコアの変化を記録する

- /etc/..とappでそれぞれローカルリポジトリを作ったけど他のインスタンスへのミラーリングどうするか問題で負荷分散nginxは諦めてしまった。

- mysql, nginxの負荷分散が意味なかった
  - topコマンドでnginx, mysql, appどれが影響しているのか把握する
    - topコマンドは各SQLクエリやappのどの関数が重いかを詳らかにはできないが、負荷分散の指標として役に立つと思う

- コア数・メモリ確認
  - `lscpu | grep CPU`
  - コア数に基づいて最適なnginxへのコア数割当が決められる
```
events {
  worker_processes auto;
  worker_connections 1024;
}
  ```